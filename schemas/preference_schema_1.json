{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Preferences",
    "description": "Schema for CARTA Preferences (Version 1)",
    "$id": "carta_preferences_1",
    "required": [
        "version"
    ],
    "properties": {
        "version": {
            "type": "integer",
            "minimum": 1,
            "description": "Version number of the preference schema. An integer >= 1 need to be provided."
        },
        "username": {
            "type": "string",
            "minLength": 1,
            "description": "???"
        },
        "theme": {
            "type": "string",
            "description": "Set the color theme of the graphical user interface of CARTA. Options are 'auto' (refering to OS theme if applicable), 'light', and 'dark'.",
            "enum": [
                "auto",
                "light",
                "dark"
            ]
        },
        "autoLaunch": {
            "type": "boolean",
            "description": "Launch a file browser when CARTA is initialized. Default is true (boolean).",
            "enum": [
                true,
                false
            ]
        },
        "fileSortingString": {
            "type": "string",
            "pattern": "^([+\\-])(date|filename|type|size)$",
            "description": "Set the default sorting policy of the file list in the file browser. The string should contain two parts with a plus '+' sign (ascending) or a minor '-' sign (descending) followed by one of the following strings: 'date', 'filename', 'type', or 'size'. For example, with '-date' (as default), the file list will be sorted by date in descending order.",
            "enum": [
                "-date",
                "+date",
                "-filename",
                "+filename",
                "-type",
                "+type",
                "-size",
                "+size"
            ]
        },
        "fileFilteringType": {
            "type": "string",
            "description": "Set the input syntax mode of the file filter in the file browser. 'fuzzy', as default, enables case-insentitive fuzzy string match. 'unix' accepts glob patterns in Unix or Unix-like operating systems. 'regex' allows defining a filter with regular expression.",
            "enum": [
                "fuzzy",
                "unix",
                "regex"
            ]
        },
        "layout": {
            "type": "string",
            "description": "Set a default layout when CARTA is initialized. Preset layouts are 'Default' (as default), 'Cube View', 'Cube Analysis', and 'Continuum Analysis'. A custom layout can be set as the default layout too.",
            "enum": [
                "Default",
                "Cube View",
                "Cube Analysis",
                "Continuum Analysis"
            ]
        },
        "cursorPosition": {
            "type": "string",
            "description": "Define the initial state of the cursor in the image viewer. 'fixed' will fix the cursor position at the image center with a cross marker to prevent updating of cursor information or spatial/spectral cursor profile. 'tracking' (default) means cursor information or spatial/spectral cursor profile will be updated along with the movement of the cursor in the image viewer.",
            "enum": [
                "fixed",
                "tracking"
            ]
        },
        "zoomMode": {
            "type": "string",
            "description": "Set the initial image zoom state when an image is loaded in the image viewer. 'full' (as default) will set the zoom level so that entire image is rendered to fit the size of the image viewer. 'fit' will set the zoom level so that one image pixel will be rendered with just one screen pixel only.",
            "enum": [
                "fit",
                "full"
            ]
        },
        "zoomPoint": {
            "type": "string",
            "description": "Set the policy of image zoom with scrolling wheel. 'cursor' (as default) enables 'focused-zoom' at the location of the cursor when scrolling. 'center' forces 'focused-zoom' to be always with respect to the center of the image viewer.",
            "enum": [
                "cursor",
                "center"
            ]
        },
        "dragPanning": {
            "type": "boolean",
            "description": "Set the default mode of image pan. With true (boolean), an image can be panned by cursor drag-and-drop event. With false, an image is effectively panned via mouse click where the clicked position will be centered in the image viewer.",
            "enum": [
                true,
                false
            ]
        },
        "spectralMatchingType": {
            "type": "string",
            "description": "Set the coordinate reference for spectral matching. Options are 'VRAD' (radio velocity; as default), 'VOPT' (optical velocity), 'FREQ' (frequency), 'WAVE' (vacuum wavelegth), 'AWAV' (air wavelength), and 'CHANNEL'.",
            "enum": [
                "VRAD",
                "VOPT",
                "FREQ",
                "WAVE",
                "AWAV",
                "CHANNEL"
            ]
        },
        "wcsMatchingType": {
            "type": "integer",
            "minimum": 0,
            "maximum": 3,
            "description": "Set the image matching state and type when a new image is loaded in the append mode. An integer (0~3) should be provided. The meaning of the allowed integers follows: {0: 'None' (as default), 1: 'Spatial only', 2: 'Spectral only', 3: 'Spatial and spectral'}."
        },
        "scaling": {
            "type": "integer",
            "minimum": 0,
            "maximum": 7,
            "description": "Set a default scaling function for raster image rendering. An integer (0~7) should be provided. The meaning of the allowed integers follows: {0: 'Linear' (as default), 1: 'Log', 2: 'Square root', 3: 'Squared', 4: 'Gamma', 5: 'Power'}."
        },
        "colormap": {
            "type": "string",
            "description": "Set a default colormap for raster image rendering. Options are: 'afmhot', 'Blues', 'coolwarm', 'cubehelix', 'gist_heat', 'gist_stern', 'gnuplot', 'gnuplot2', 'gray', 'greens', 'greys', 'hot', 'inferno' (as default), 'jet', 'magma', 'nipy_spectral', 'plasma', 'rainbow', 'RdBu', 'RdGy', 'reds', 'seismic', 'spectral', 'tab10', 'viridis'",
            "enum": [
                "afmhot", "Blues", "coolwarm", "cubehelix", "gist_heat",
                "gist_stern", "gnuplot", "gnuplot2", "gray", "greens",
                "greys", "hot", "inferno", "jet", "magma",
                "nipy_spectral", "plasma", "rainbow", "RdBu", "RdGy",
                "reds", "seismic", "spectral", "tab10", "viridis"
            ]
        },
        "percentile": {
            "type": "number",
            "inclusiveMaximum": 100,
            "exclusiveMinimum": 0,
            "description": "Set a color clip level for raster image rendering. A number between 0 (exclusive) and 100 (inclusive) should be given. Common values are [100, 99.99, 99.95, 99.9, 99.5, 99, 95, 90].",
            "examples": [
                100,
                99.99,
                99.95,
                99.9,
                99.5,
                99,
                95,
                90
            ]
        },
        "scalingAlpha": {
            "type": "number",
            "minimum": 1,
            "description": "Set a default control parameter for 'Log' or 'Power' scaling function. A value >= 1 should be given. Default is 1000."
        },
        "scalingGamma": {
            "type": "number",
            "exclusiveMinimum": 0,
            "description": "Set a default control parameter for 'Gamma' scaling function. A value > 0 should be given. Default is 1."
        },
        "nanColorHex": {
            "type": "string",
            "pattern": "^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$",
            "description": "Set a default color to render NaN pixels in a raster image. The default color in hex code is '#137CBD'. Common options are {black: '#000000', grey: '#8A9BA8', white: '#FFFFFF'}. To adjust the transparency, please use 'nanAlpha'.",
            "examples": [
                "#137CBD",
                "#000000",
                "#8A9BA8",
                "#FFFFFF"
            ]
        },
        "nanAlpha": {
            "type": "number",
            "minimum": 0,
            "maximum": 1,
            "description": "Set the transparency (alpha value) of NaN pixels in a raster image. To set the color for NaN pixels, please use 'nanColorHex' with a color hex code. Default is 1. Use 0 to render transparent NaN pixels."
        },
        "contourGeneratorType": {
            "type": "string",
            "description": "Set a default generator of contour levels. Options are: 'start-step-multiplier' (as default), 'min-max-scaling', 'percentages-ref.value', and 'mean-sigma-list'. Use 'contourNumLevels' to define how many levels to be generared.",
            "enum": [
                "start-step-multiplier",
                "min-max-scaling",
                "percentages-ref.value",
                "mean-sigma-list"
            ]
        },
        "contourSmoothingMode": {
            "type": "integer",
            "minimum": 0,
            "maximum": 2,
            "description": "Set the image smoothing mode before computing contour vertices. An integer should be provided. Options are: {0: 'None', 1: 'Block', 2: 'Gaussian' (as default)}. Use 'contourSmoothingFactor' to define a kernel size for smoothing."
        },
        "contourSmoothingFactor": {
            "type": "integer",
            "minimum": 0,
            "description": "Set a kernel size for the chosen contour smoothing mode ('contourSmoothingMode'). An integer >=0 should be given. Default is 4, meaning the kernel size is 4x4 pixel."
        },
        "contourNumLevels": {
            "type": "integer",
            "minimum": 1,
            "description": "Define the number of levels to be generated by the contour level generator ('contourGeneratorType'). An integer >= 1 should be given. Default is 5."
        },
        "contourThickness": {
            "type": "number",
            "exclusiveMinimum": 0,
            "inclusiveMaximum": 10,
            "multipleOf": 0.5,
            "description": "Set a default line width for contour rendering. A value (multiple of 0.5) between 0 (exclusive) and 10 (inclusive) should be given. Default is 1."
        },
        "contourColormapEnabled": {
            "type": "boolean",
            "description": "A boolean flag to enable/disable contour rendering with variable colors for different levels. Default is false.",
            "enum": [
                true,
                false
            ]
        },
        "contourColor": {
            "type": "string",
            "pattern": "^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$",
            "description": "Define a default color as a hex code for contour rendering. Default is '#0F9960'. Examples are: {black: '#000000', white: '#FFFFFF', red: '#FF0000', green: '#00FF00', blue: '#0000FF', yellow: '#FFFF00', cyan: '#00FFFF', magenta: '#FF00FF'}.",
            "examples": [
                "#0F9960",
                "#000000",
                "#FFFFFF",
                "#FF0000",
                "#00FF00",
                "#0000FF",
                "#FFFF00",
                "#00FFFF",
                "#FF00FF"
            ]
        },
        "contourColormap": {
            "type": "string",
            "description": "Set a colormap for contour rendering with variable colors for different levels. Options are: 'afmhot', 'Blues', 'coolwarm', 'cubehelix', 'gist_heat', 'gist_stern', 'gnuplot', 'gnuplot2', 'gray', 'greens', 'greys', 'hot', 'inferno', 'jet', 'magma', 'nipy_spectral', 'plasma', 'rainbow', 'RdBu', 'RdGy', 'reds', 'seismic', 'spectral', 'tab10', 'viridis' (as default)",
            "enum": [
                "afmhot", "Blues", "coolwarm", "cubehelix", "gist_heat",
                "gist_stern", "gnuplot", "gnuplot2", "gray", "greens",
                "greys", "hot", "inferno", "jet", "magma",
                "nipy_spectral", "plasma", "rainbow", "RdBu", "RdGy",
                "reds", "seismic", "spectral", "tab10", "viridis"
            ]
        },
        "astColor": {
            "type": "integer",
            "description": "Set a default color theme to render the coordinate layer in the image viewer. TODO: revisit once unified color selector is in place.",
            "minimum": 0
        },
        "astGridVisible": {
            "type": "boolean",
            "description": "A boolean flag to enable/disable coordinate grid lines in the image viewer. Default is false.",
            "enum": [
                false,
                true
            ]
        },
        "astLabelsVisible": {
            "type": "boolean",
            "description": "A boolean flag to enable/disable x and y labels in the image viewer. Default is true.",
            "enum": [
                true,
                false
            ]
        },
        "wcsType": {
            "type": "string",
            "description": "Set the default format to display world coordinates in the image viewer. Options are: 'automatic' (as default), 'degrees', 'sexagesimal'.",
            "enum": [
                "automatic",
                "degrees",
                "sexagesimal"
            ]
        },
        "beamVisible": {
            "type": "boolean",
            "description": "A boolean flag to enable/disable the display of a beam element in the image viewer. Default is true.",
            "enum": [
                true,
                false
            ]
        },
        "beamColor": {
            "type": "string",
            "pattern": "^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$",
            "description": "Define a default color as a hex code for beam element rendering in the image viewer. Default is '#8A9BA8'. Examples are: {black: '#000000', white: '#FFFFFF', red: '#FF0000', green: '#00FF00', blue: '#0000FF', yellow: '#FFFF00', cyan: '#00FFFF', magenta: '#FF00FF'}.",
            "examples": [
                "#8A9BA8",
                "#000000",
                "#FFFFFF",
                "#FF0000",
                "#00FF00",
                "#0000FF",
                "#FFFF00",
                "#00FFFF",
                "#FF00FF"
            ]
        },
        "beamType": {
            "type": "string",
            "description": "Set a style for beam element rendering in the image viewer. Options are: 'open' (as default) and 'solid'.",
            "enum": [
                "open",
                "solid"
            ]
        },
        "beamWidth": {
            "type": "number",
            "exclusiveMinimum": 0,
            "inclusiveMaximum": 10,
            "multipleOf": 0.5,
            "description": "Set a default line width to render the beam element in the image viewer. A value (multiple of 0.5) between 0 (exclusive) and 10 (inclusive) should be given. Default is 1."
        },
        "regionColor": {
            "type": "string",
            "pattern": "^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$",
            "description": "Set a default color as a hex code for region rendering in the image viewer. Default is '#2EE6D6'. Examples are: {black: '#000000', white: '#FFFFFF', red: '#FF0000', green: '#00FF00', blue: '#0000FF', yellow: '#FFFF00', cyan: '#00FFFF', magenta: '#FF00FF'}.",
            "examples": [
                "#2EE6D6",
                "#000000",
                "#FFFFFF",
                "#FF0000",
                "#00FF00",
                "#0000FF",
                "#FFFF00",
                "#00FFFF",
                "#FF00FF"
            ]
        },
        "regionLineWidth": {
            "type": "number",
            "exclusiveMinimum": 0,
            "inclusiveMaximum": 10,
            "multipleOf": 0.5,
            "description": "Set a default line width to render a region in the image viewer. A value (multiple of 0.5) between 0 (exclusive) and 10 (inclusive) should be given. Default is 2."
        },
        "regionDashLength": {
            "type": "integer",
            "minimum": 0,
            "maximum": 50,
            "description": "Set the default style of region rendering with dashed line in the image viewer. An integer between 0 (inclusive) and 50 (inclusive) should be given. Default is 0 (as solid line)."
        },
        "regionType": {
            "type": "integer",
            "minimum": 0,
            "maximum": 6,
            "description": "Set the default region type of the region creation button in the image viewer. An integer should be given. Options are: {0: 'Point', 1: 'Line' (NOT IMPLEMENTED YET), 2: 'Polyline' (NOT IMPLEMENTED YET), 3: 'Rectangle' (as default), 4: 'Ellipse', 5: 'Annulus' (NOT IMPLEMENTED YET), 6: 'Polygon'}."
        },
        "regionCreationMode": {
            "type": "string",
            "description": "Specify the default cursor creation mode for regions with symmetry such as 'Rectangle' or 'Ellipse'. Options are: 'center' and 'corner'.",
            "enum": [
                "center",
                "corner"
            ]
        },
        "regionSize": {
            "type": "integer",
            "description": "Set the default size of 'Rectangle' or 'Ellipse' region when created with a single click. The size is defined in number of screen pixel (>=1) as an integer. Default is 30.",
            "minimum": 1
        },
        "imageCompressionQuality": {
            "type": "integer",
            "minimum": 4,
            "maximum": 32,
            "description": "ADJUST WITH CAUTION. Set the compression quality factor for image tile data compression with zfp. An integer between 4 and 32 (best image quality after compression) should be provided. Default is 11."
        },
        "animationCompressionQuality": {
            "type": "integer",
            "minimum": 4,
            "maximum": 32,
            "description": "ADJUST WITH CAUTION. Set the compression quality factor for image tile data compression with zfp during animation playback. An integer between 4 and 32 (best image quality after compression) should be provided. Default is 9."
        },
        "GPUTileCache": {
            "type": "integer",
            "multipleOf": 128,
            "minimum": 512,
            "description": "ADJUST WITH CAUTION. Set the cache size in number of image tiles in GPU memory. Default is 512. It needs to be at least 512 and be multiple of 128."
        },
        "systemTileCache": {
            "type": "integer",
            "multipleOf": 128,
            "minimum": 1024,
            "description": "ADJUST WITH CAUTION. Set the cache size in number of image tiles in system memory. Default is 4096. It needs to be at least 1024 and be multiple of 128."
        },
        "contourDecimation": {
            "type": "integer",
            "minimum": 1,
            "maximum": 32,
            "description": "ADJUST WITH CAUTION. Set the decimation factor for contour vertices generation. Default is 4, meaning the distance between adjacent contour vertices is rounded to 1/4 image pixel size. Contours are more smooth if a larger decimation factor is applied."
        },
        "contourCompressionLevel": {
            "type": "integer",
            "minimum": 0,
            "maximum": 19,
            "description": "ADJUST WITH CAUTION. Set the compression quality factor for contour data compression with zstd. An integer between 0 and 19 (best quality after compression) should be given. Default is 8."
        },
        "contourChunkSize": {
            "type": "integer",
            "multipleOf": 25000,
            "minimum": 25000,
            "maximum": 1000000,
            "description": "ADJUST WITH CAUTION. Set the chuck size for contour data streaming. An integer between 25000 and 1000000 should be provided. The value needs to be multiple of 25000. Default is 100000 (100k)."
        },
        "contourControlMapWidth": {
            "type": "integer",
            "multipleOf": 128,
            "minimum": 128,
            "maximum": 1024,
            "description": "ADJUST WITH CAUTION. Set the width of the contour control map for image matching. An integer between 128 and 1024 should be provided. The value needs to be multiple of 128. Default is 256."
        },
        "streamContoursWhileZooming": {
            "type": "boolean",
            "description": "should be 'streamImageTilesWhileZooming'???\n\nADJUST WITH CAUTION. A boolean flag to enable/disable image tile stream for intermediate zoom levels when image zooming is in action. Default is false.",
            "enum": [
                false,
                true
            ]
        },
        "lowBandwidthMode": {
            "type": "boolean",
            "description": "A boolean flag to enable/disable the low bandwidth mode. With the low bandwidth mode, required image resolution is reduced by a factor of two and cursor responding time is reduced from 200 ms to 400 ms. Default is false.",
            "enum": [
                false,
                true
            ]
        },
        "stopAnimationPlayback": {
            "type": "integer",
            "minimum": 5,
            "maximum": 30,
            "description": "Set a timer (in minutes) to stop animation playback automatically to save computing resources. An integer between 5 and 30 should be given. Default is 5 (minutes)."
        }
    }
}
